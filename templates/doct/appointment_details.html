{% extends "user/base.html" %}

{% load static %}

{% block title  %}User Login{% endblock title  %}

{% block css  %}
<style>
    .patient-card {
        display: flex;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        max-width: 800px;
    }

    .patient-details, .patient-history {
        padding: 20px;
        box-sizing: border-box;
        flex: 1;
        width: 50rem;
    }

    .patient-details {
        border-right: 1px solid #eee;
    }

    .patient-history {
        background-color: #f9f9f9;
    }

    .patient-details h2, .patient-history h2 {
        margin: 2rem 0;
    }

    .patient-details p {
        margin-bottom: 10px;
    }

    .history-item {
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
        margin-bottom: 10px;
    }

    .history-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
    }
</style>
{% endblock css  %}

{% block main %}

</head>
<body>
<div class="container">
    <div class="patient-card">
        <div class="patient-details">
            <h2>Patient Details</h2>
            <p><strong>Name: {{appointment.user.name|title}}</strong> </p>
            <p><strong>Age: {{appointment.age}}</strong></p>
            <p><strong>Gender: {{appointment.user.gender}}</strong> </p>
            <p><strong>Date of Birth: {{appointment.user.dob}}</strong> </p>
            <p><strong>Contact: {{appointment.user.phone}}</strong> </p>
            <hr>
            <br>
            
            <p><strong>Doctor: {{appointment.doctor.name}}</strong> </p>
        </div>
        <div class="patient-history">
            <h2>Medical History</h2>
            <div class="history-item">
                {% for i in history %}
                <p><strong>Previous Appointment Date: {{i.appointment_date}}</strong> </p>
                <p><strong>Doctor Name:</strong> {{i.doctor.name|title}} </p>
                
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock main %}

{% block js %}
<script>
    //card click
    $(".card").each(function(){
        $(this).click(function(){
            let appointmentId = $(this).attr("data-id");
            window.location.href = "/doct/appointment_details/?appointmentId="+appointmentId;
        })
    })
</script>

    {% endblock js %}